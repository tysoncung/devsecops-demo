#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit security checks..."

# Run ESLint
echo "ğŸ“ Running ESLint..."
npm run lint

# Check for secrets
echo "ğŸ” Checking for secrets..."
if command -v gitleaks &> /dev/null; then
    gitleaks detect --source . --verbose
else
    echo "âš ï¸  Gitleaks not installed. Install with: brew install gitleaks"
fi

# Run npm audit
echo "ğŸ“¦ Checking dependencies..."
npm audit --audit-level=moderate

# Run lint-staged
npx lint-staged